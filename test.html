<!DOCTYPE html>
 
<html>
<head>
    <meta charset="utf-8" />
    <title>test</title>
</head>
<body>
    <button onclick="calculate()">calculate</button>
    <button onclick="dis()">dis</button>
 
    <script type="text/javascript">
        window.onload = function () {
            setInterval(function() {
                if (window.Notification) {
                    Notification.requestPermission();
                }
                var d = new Date();
                var week = d.getDay(); // 일요일부터 0~6
                var hour = d.getHours();
                var min = d.getMinutes();
                var sec = d.getSeconds();
                var milsec = d.getMilliseconds();
                if (week !== 0 || week !== 6) {
                    if (hour === 4) {
                        if (min === 32) {
                            if (milsec === 0 && sec === 0) {
                                notify(hour, min);
                            }
                        }
                    }
                }
            }, 100);
        }
        function calculate() {
            var d = new Date();
            var hour = d.getHours();
            var min = d.getMinutes();
            notify(hour, min);
        }
 
        function notify(hour = 0, min = 0) {
            console.log(Notification.permission);
            if (Notification.permission !== 'granted') {
                return ;
            }
            else {
                var n = new Notification(`수업 들어갈 시간입니다.`, {
                    icon: './images/namil_logo.png',
                    body: `1교시 시작 5분전입니다.\n현재시간 : ${hour}시 ${min}분`,
                });
                n.onclick = function () {
                    window.open('https://namilsite.netlify.app?page=zoomid');
                };
            }
        }
    </script>
</body>
</html>
