<div id="title">
    <span>반을 선택해 주세요.</span>
</div>
<div id="btn">
    <select name="cm" id="cm" title="반 선택" onchange="c();">
        <option id="sel" value="1">1반</option>
        <option id="sel" value="2">2반</option>
        <option id="sel" value="3">3반</option>
        <option id="sel" value="4">4반</option>
        <option id="sel" value="5">5반</option>
        <option id="sel" value="6">6반</option>
        <option id="sel" value="7">7반</option>
        <option id="sel" value="8">8반</option>
    </select>
</div>
<div id="classtime"></div>

<script type="text/javascript">
    // 함수로 묶음
    function c() {
        // jquery 시작
        $(function() {
            // 반 선택 확인
            var s = $('#cm option:selected').val();

            // 제작된 반 리스트
            var slist = ['5', '6'];

            // 반 시간표가 있는지 확인
            if (slist.indexOf(s) > -1) {
                // txt 파일 가져오기 (load)
                // 읽어올문서의 파일명, 확인용 함수(완료여부)
                $('#classtime').load(`../file/room${s}.txt`, function(txt, status) {
                    if (status == 'error') {
                        $('#classtime').text('파일을 찾을 수 없습니다.');
                    } else {
                        var classhtml = `
                        <table class='ttitle'>
                            <tr>
                                <th>${s}반 시간표</th>
                            </tr>
                        </table>`;

                        var chtml = `<table class='tchild'>`;
                        
                        var text = txt.split(`\n`);
                        for (i=0;i<text.length-1;i++) {
                            var args = text[i].split(/  /g);
                            chtml += `<tr>`;
                            for (j=0;j<args.length;j++) {
                                chtml += `<td>${args[j]}</td>`;
                            }
                            chtml += `</tr>`;
                        }
                        chtml += `</table>`;

                        var cstyle = `
                        <style>
                            table {
                                border-collapse: collapse;
                                margin: auto;
                                width: 90%;
                            }
                            .ttitle {
                                border: 3.5px solid white;
                            }
                            .ttitle > th {
                                font-weight: 1000;
                            }
                            .tchild {
                                border: 2.5px solid white;
                            }
                            th, td {
                                border-collapse: collapse;
                                border: 1.5px solid white;
                                padding: 5px;
                                height: 40px;
                                font-size: 100%;
                            }
                            td:first-child,
                            td:nth-child(1) {
                                font-weight: bold;
                            }
                        </style>`;

                        $('#classtime').html(cstyle + classhtml + chtml);
                    }
                });
            } else {
                $('#classtime').text(`해당 반의 시간표가 없습니다.
                
                (시간표추가를 원하시면 tmdgks0466@naver.com으로 연락해주세요.)`);
            }
        });
    }
    c(); // 시작할때 처음걸로 한번 돌림
</script>
