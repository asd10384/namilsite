<!doctype html>
<html lang='ko'>
    <head>
        <meta charset='utf-8' />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <!-- CSS 설정 -->
        <link rel="stylesheet" href="../css/excel.css" />
        <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

        <!-- meta 설정 -->
        <title>ㆍ사이트 모음ㆍ</title>
        <meta name="title" content="사이트 모음" />
        <meta name="description" content="남일고 관련 사이트" />
        <meta name="author" content="1326 허승한" />
        <meta name="other Agent" content="1326 허승한" />
        <meta name="email" content="tmdgks0466@naver.com" />

        <meta name="image" content="https://namilsite.netlify.app/images/namil_logo.png" />
        <meta property="url" content="https://namilsite.netlify.app" />

        <meta property="og:title" content="사이트 모음" />
        <meta property="og:site_name" content="www.namilsite.kro.kr" />
        <meta property="og:type" content="website" />
        <meta property="og:locale" content="ko_KR" />

        <meta property="og:url" content="https://namilsite.netlify.app" />
        
        <meta property="og:image" content="https://namilsite.netlify.app/images/namil_logo.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:alt" content="남일고 관련 사이트 모음" />

        <meta property="og:description" content="남일고 관련 사이트" />

        
        <script type="text/javascript">
            function addzero(num) {
                if (num < 10) {
                    num = '0' + num;
                }
                return num;
            }
            function dday() {
                const nowDate = new Date();
                const year = nowDate.getFullYear();
                const month = nowDate.getMonth() + 1;
                alert(`${year}년 ${month}월 급식표를 확인합니다.`);
                window.open(`https://stu.pen.go.kr/sts_sci_md00_001.do?schulCode=C100000440&schulCrseScCode=4&schulKndScCode=04&schYm=${year}${addzero(month)}`, '_blank');
            }
        </script>

    </head>

    <body>
        <div id="logo">
            <a href="../index.html"><img src="../images/logo.png" /></a>
        </div>
        <div id="clock">
            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    // 시간을 딜레이 없이 나타내기 위한 선 실행
                    // 이후 0.5초에 한번씩 시간을 갱신
                    setInterval(realTimer, 500);
                });
                function realTimer() {
                    const nowDate = new Date();
                    const year = nowDate.getFullYear();
                    const month = nowDate.getMonth() + 1;
                    const date = nowDate.getDate();
                    const hour = nowDate.getHours();
                    const min = nowDate.getMinutes();
                    const sec = nowDate.getSeconds();
                    document.getElementById('realtime').innerHTML = 
                        `${year}-${addzero(month)}-${addzero(date)} ${addzero(hour)}:${addzero(min)}:${addzero(sec)}`;
                }
            </script>
            <span id="nowTimes"><a href="../html/clock.html" id="realtime"></a></span>
        </div>
        <div id='menu'>
            <ul>
                <li class='sub'><a href='../index.html' title="홈으로 이동"><span>Home</span></a></li>
                <li class='sub'><a href='https://hcs.eduro.go.kr' target="_blank" title="자가진단 사이트로 이동"><span>자가진단</span></a></li>
                <li class='has-sub'><a href='#'><span>온라인수업</span></a>
                    <ul>
                        <li><a href='../html/zoomid.html'><span>ㆍ ZOOM 번호</span></a></li>
                        <li><a href='https://hoc3.ebssw.kr/onlineClass/search/onlineClassSearchView.do?schulCcode=01395&schCssTyp=online_high' target="_blank"><span>ㆍ 온라인클래스</span></a></li>
                        <li><a href='https://www.classting.com/news' target="_blank"><span>ㆍ 클래스팅</span></a></li>
                        <li class='last'><a href='https://classroom.google.com' target="_blank"><span>ㆍ 클래스룸</span></a></li>
                    </ul>
                </li>
                <li class='has-sub'><a href='#'><span>사이트모음</span></a>
                    <ul>
                        <li><a href='http://school.busanedu.net/bsnamil-h/main.do' target="_blank"><span>ㆍ 학교홈페이지</span></a></li>
                        <li><a href="../html/classtime.html"><span>ㆍ 학교시간표</span></a></li>
                        <li><a href="https://www.hscredit.kr"><span>ㆍ 고교학점제</span></a></li>
                        <li><a href="https://www.hscredit.net"><span>ㆍ 고교학점제<br/>&ensp;&ensp;&nbsp;(수강신청)</span></a></li>
                        <li class='last'><a href='#' onclick="dday();"><span>ㆍ 학교급식</span></a></li>
                    </ul>
                </li>
                <li class='has-sub'><a href='#'><span>예전사이트</span></a>
                    <ul>
                        <li><a href='https://namilfirstsite.netlify.app' target="_blank"><span>ㆍ 초기사이트</span></a></li>
                        <li><a href='https://namilsimplesite.netlify.app' target="_blank"><span>ㆍ 두번째사이트</span></a></li>
                        <li class='last'><a href='https://namilsite.netlify.app' target="_blank"><span>ㆍ 현재사이트</span></a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="main">
            <script type="text/javascript">
                const headers = new Headers({
                    'Content-Type': 'text/https',
                });
                fetch('https://namilsite.netlify.app/file/room.txt', { headers });
            </script>

            <script type="text/javascript">
                // 함수로 묶음
                function c() {
                    // jquery 시작
                    $(function() {
                        // 반 선택 확인
                        var s = $('#cm option:selected').val();

                        // 제작된 반 리스트
                        var slist = [3];

                        // 반 시간표가 있는지 확인
                        console.log(slist.indexOf(s));
                        if (slist.indexOf(s) > -1) {
                            // txt 파일 가져오기 (load)
                            // 읽어올문서의 파일명, 확인용 함수(완료여부)
                            $('#classtime').load(`../file/room${s}.txt`, function(txt, status) {
                                if (status == 'error') {
                                    $('#classtime').text('없음');
                                } else {
                                    var text = txt.split(`\n`);
                                    var c1 = text[1].split(`  `);
                                    var c2 = text[2].split(`  `);
                                    var c3 = text[3].split(`  `);
                                    var c4 = text[4].split(`  `);
                                    var c5 = text[5].split(`  `);
                                    var c6 = text[6].split(`  `);
                                    var c7 = text[7].split(`  `);

                                    $('#classtime').html(`
                                        <table id='ct'>
                                            <tr>
                                                <th></th>
                                                <th>월요일</th>
                                                <th>화요일</th>
                                                <th>수요일</th>
                                                <th>목요일</th>
                                                <th>금요일</th>
                                            </tr>
                                            <tr>
                                                <th>${c1[0]}</th>
                                                <th>${c1[1]}</th>
                                                <th>${c1[2]}</th>
                                                <th>${c1[3]}</th>
                                                <th>${c1[4]}</th>
                                                <th>${c1[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c2[0]}</th>
                                                <th>${c2[1]}</th>
                                                <th>${c2[2]}</th>
                                                <th>${c2[3]}</th>
                                                <th>${c2[4]}</th>
                                                <th>${c2[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c3[0]}</th>
                                                <th>${c3[1]}</th>
                                                <th>${c3[2]}</th>
                                                <th>${c3[3]}</th>
                                                <th>${c3[4]}</th>
                                                <th>${c3[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c4[0]}</th>
                                                <th>${c4[1]}</th>
                                                <th>${c4[2]}</th>
                                                <th>${c4[3]}</th>
                                                <th>${c4[4]}</th>
                                                <th>${c4[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c5[0]}</th>
                                                <th>${c5[1]}</th>
                                                <th>${c5[2]}</th>
                                                <th>${c5[3]}</th>
                                                <th>${c5[4]}</th>
                                                <th>${c5[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c6[0]}</th>
                                                <th>${c6[1]}</th>
                                                <th>${c6[2]}</th>
                                                <th>${c6[3]}</th>
                                                <th>${c6[4]}</th>
                                                <th>${c6[5]}</th>
                                            </tr>
                                            <tr>
                                                <th>${c7[0]}</th>
                                                <th>${c7[1]}</th>
                                                <th>${c7[2]}</th>
                                                <th>${c7[3]}</th>
                                                <th>${c7[4]}</th>
                                                <th>${c7[5]}</th>
                                            </tr>
                                        </table>
                                    `);
                                }
                            });
                        } else {
                            $('#classtime').text('해당 반의 시간표가 없습니다.');
                        }
                    });
                }
            </script>
            <select name="cm" id="cm" title="반 선택" onchange="c();">
                <option value="1">1반</option>
                <option value="2">2반</option>
                <option value="3">3반</option>
                <option value="4">4반</option>
                <option value="5">5반</option>
                <option value="6">6반</option>
                <option value="7">7반</option>
                <option value="8">8반</option>
            </select>
            <div id="classtime"></div>
        </div>
    </body>
</html>
