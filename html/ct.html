<!doctype html>
<html lang='ko'>
    <head>
        <meta charset='utf-8' />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <!-- CSS 설정 -->
        <link rel="stylesheet" href="../css/ct.css" />
        <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

        <!-- meta 설정 -->
        <title>ㆍ시간표 모음ㆍ</title>
        <meta name="title" content="시간표 모음" />
        <meta name="description" content="남일고 관련 시간표 사이트" />
        <meta name="author" content="1326 허승한" />
        <meta name="other Agent" content="1326 허승한" />
        <meta name="email" content="tmdgks0466@naver.com" />

        <meta name="image" content="https://namilsite.netlify.app/images/namil_logo.png" />
        <meta property="url" content="https://namilsite.netlify.app" />

        <meta property="og:title" content="시간표 모음" />
        <meta property="og:site_name" content="www.namilsite.kro.kr" />
        <meta property="og:type" content="website" />
        <meta property="og:locale" content="ko_KR" />

        <meta property="og:url" content="https://namilsite.netlify.app" />
        
        <meta property="og:image" content="https://namilsite.netlify.app/images/namil_logo.png" />
        <meta property="og:image:type" content="image/png" />
        <meta property="og:image:alt" content="남일고 관련 시간표 모음 사이트" />

        <meta property="og:description" content="남일고 관련 시간표 사이트" />

        
        <script type="text/javascript">
            function addzero(num) {
                if (num < 10) {
                    num = '0' + num;
                }
                return num;
            }
            function dday() {
                const nowDate = new Date();
                const year = nowDate.getFullYear();
                const month = nowDate.getMonth() + 1;
                alert(`${year}년 ${month}월 급식표를 확인합니다.`);
                window.open(`https://stu.pen.go.kr/sts_sci_md00_001.do?schulCode=C100000440&schulCrseScCode=4&schulKndScCode=04&schYm=${year}${addzero(month)}`, '_blank');
            }
        </script>

    </head>

    <body>
        <div id="logo">
            <a href="../index.html"><img src="../images/logo.png" /></a>
        </div>
        <div id="clock">
            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    // 시간을 딜레이 없이 나타내기 위한 선 실행
                    // 이후 0.5초에 한번씩 시간을 갱신
                    setInterval(realTimer, 500);
                });
                function realTimer() {
                    const nowDate = new Date();
                    const year = nowDate.getFullYear();
                    const month = nowDate.getMonth() + 1;
                    const date = nowDate.getDate();
                    const hour = nowDate.getHours();
                    const min = nowDate.getMinutes();
                    const sec = nowDate.getSeconds();
                    document.getElementById('realtime').innerHTML = 
                        `${year}-${addzero(month)}-${addzero(date)} ${addzero(hour)}:${addzero(min)}:${addzero(sec)}`;
                }
            </script>
            <span id="nowTimes"><a href="../html/clock.html" id="realtime"></a></span>
        </div>
        <div id='menu'>
            <ul>
                <li class='sub'><a href='../index.html' title="홈으로 이동"><span>Home</span></a></li>
                <li class='sub'><a href='https://hcs.eduro.go.kr' target="_blank" title="자가진단 사이트로 이동"><span>자가진단</span></a></li>
                <li class='has-sub'><a href='#'><span>온라인수업</span></a>
                    <ul>
                        <li><a href='../html/zoomid.html'><span>ㆍ ZOOM 번호</span></a></li>
                        <li><a href='https://hoc3.ebssw.kr/onlineClass/search/onlineClassSearchView.do?schulCcode=01395&schCssTyp=online_high' target="_blank"><span>ㆍ 온라인클래스</span></a></li>
                        <li><a href='https://www.classting.com/news' target="_blank"><span>ㆍ 클래스팅</span></a></li>
                        <li class='last'><a href='https://classroom.google.com' target="_blank"><span>ㆍ 클래스룸</span></a></li>
                    </ul>
                </li>
                <li class='has-sub'><a href='#'><span>사이트모음</span></a>
                    <ul>
                        <li><a href='http://school.busanedu.net/bsnamil-h/main.do' target="_blank"><span>ㆍ 학교홈페이지</span></a></li>
                        <li><a href="../html/classtime.html"><span>ㆍ 학교시간표</span></a></li>
                        <li><a href="https://www.hscredit.kr"><span>ㆍ 고교학점제</span></a></li>
                        <li><a href="https://www.hscredit.net"><span>ㆍ 고교학점제<br/>&ensp;&ensp;&nbsp;(수강신청)</span></a></li>
                        <li class='last'><a href='#' onclick="dday();"><span>ㆍ 학교급식</span></a></li>
                    </ul>
                </li>
                <li class='has-sub'><a href='#'><span>예전사이트</span></a>
                    <ul>
                        <li><a href='https://namilfirstsite.netlify.app' target="_blank"><span>ㆍ 초기사이트</span></a></li>
                        <li><a href='https://namilsimplesite.netlify.app' target="_blank"><span>ㆍ 두번째사이트</span></a></li>
                        <li class='last'><a href='https://namilsite.netlify.app' target="_blank"><span>ㆍ 현재사이트</span></a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div id="main">
            <script type="text/javascript">
                const headers = new Headers({
                    'Content-Type': 'text/https',
                });
                fetch('https://namilsite.netlify.app/file/room.txt', { headers });
            </script>

            <div id="title">
                <span>반을 선택해 주세요.</span>
            </div>
            <div id="btn">
                <select name="cm" id="cm" title="반 선택" onchange="c();">
                    <option id="sel" value="1">1반</option>
                    <option id="sel" value="2">2반</option>
                    <option id="sel" value="3">3반</option>
                    <option id="sel" value="4">4반</option>
                    <option id="sel" value="5">5반</option>
                    <option id="sel" value="6">6반</option>
                    <option id="sel" value="7">7반</option>
                    <option id="sel" value="8">8반</option>
                </select>
            </div>
            <div id="classtime"></div>

            <script type="text/javascript">
                // 함수로 묶음
                function c() {
                    // jquery 시작
                    $(function() {
                        // 반 선택 확인
                        var s = $('#cm option:selected').val();

                        // 제작된 반 리스트
                        var slist = ['3'];

                        // 반 시간표가 있는지 확인
                        if (slist.indexOf(s) > -1) {
                            // txt 파일 가져오기 (load)
                            // 읽어올문서의 파일명, 확인용 함수(완료여부)
                            $('#classtime').load(`../file/room${s}.txt`, function(txt, status) {
                                if (status == 'error') {
                                    $('#classtime').text('오류발생 (파일을 찾지 못함)');
                                } else {
                                    var chtml = `
                                        <table id='ct'>
                                            <tbody>
                                                <tr>
                                                    <th></th>
                                                    <th>월요일</th>
                                                    <th>화요일</th>
                                                    <th>수요일</th>
                                                    <th>목요일</th>
                                                    <th>금요일</th>
                                                <tr>`;
                                    var text = txt.split(`\n`);
                                    for (i=0;i<text.length;i++) {
                                        var args = text[i+1].split(/  /g);
                                        console.log(args);
                                        eval(`var c${i}`);
                                        eval(`c${i} = ${args}`);
                                        console.log(c1);
                                        chtml += `<tr>`;
                                        for (j=0;j<eval('c'+i).length;j++) {
                                            chtml += `<th>${eval('c'+i)[j]}</th>`;
                                        }
                                        chtml += `</tr>`;
                                    }
                                    chtml += `</tbody></table>`;
                                    console.log(chtml);
                                    alert(chtml);
                                    $('#classtime').html(chtml);
                                }
                            });
                        } else {
                            $('#classtime').text('해당 반의 시간표가 없습니다.');
                        }
                    });
                }
                c();
            </script>
        </div>
    </body>
</html>
